# ComfyUI_RN_Transtor

**RN 翻译器 - 基于大模型 API 的专业翻译插件**

## 功能特点

- 🌐 **多语言翻译**：支持自动检测源语言，翻译到目标语言
- 🎯 **多种翻译风格**：标准、正式、口语化、学术、商务风格
- 🔧 **多 API 支持**：支持 OpenAI、DeepSeek、通义千问、豆包等兼容 OpenAI 接口的大模型
- 💡 **智能提示**：内置专业翻译助手提示词（不在界面展示）
- ⚙️ **灵活配置**：可自定义温度参数，支持 API/模型选择

## 支持的API服务商

由于大多数 LLM API 都兼容 OpenAI 的接口规范，本插件可以接入任何兼容 OpenAI 接口的 LLM 模型：
- **OpenAI**: GPT-4、GPT-4o、GPT-4o-mini 等
- **DeepSeek**: DeepSeek-Chat, DeepSeek-Coder 等
- **通义千问**: Qwen 系列模型
- **豆包**: 豆包系列模型
- **智谱GLM**: GLM 系列模型
- **MinMax**: MinMax 系列模型

## 使用说明

### 基本配置

1. **apiBaseUrl**: 输入 API 服务商提供的基础 URL
   - OpenAI: `https://api.openai.com/v1`
   - DeepSeek: `https://api.deepseek.com/v1`
   - 其他服务商请查看对应文档

2. **apiKey**: 输入您的 API 密钥

3. **model**: 输入要使用的具体模型名称
  - OpenAI: `gpt-4o-mini`（默认回退）、`gpt-4o` 等
  - DeepSeek: `deepseek-chat`
  - 其他模型请查看对应文档

### 翻译设置

4. **源文本**: 输入需要翻译的文本内容

5. **源语言**: 选择源文本的语言（支持自动检测）
   - 自动检测
   - 中文
   - 英文
   - 日文
   - 韩文
   - 法文
   - 德文
   - 俄文
   - 西班牙文

6. **目标语言**: 选择要翻译到的目标语言
   - 中文
   - 英文
   - 日文
   - 韩文
   - 法文
   - 德文
   - 俄文
   - 西班牙文

7. **翻译风格**: 选择翻译的语言风格
   - **标准**: 通用翻译风格
   - **正式**: 正式、专业的语言
   - **口语化**: 通俗易懂的语言
   - **学术**: 学术性语言，保持专业性
   - **商务**: 商务场合适用的语言

### 高级设置

8. **温度参数**: 控制翻译的创造性（0.0-2.0）
   - 较低值（0.1-0.3）: 更确定、一致的翻译
   - 中等值（0.4-0.7）: 平衡的翻译
   - 较高值（0.8-1.5）: 更有创造性的翻译

（系统提示词已内置为专业翻译助手，不在界面中展示）

## 输出说明

- **翻译结果**: 翻译后的文本内容

## 使用示例

### 示例1：中英翻译（标准风格）
- 源文本: "Hello, how are you today?"
- 源语言: 英文
- 目标语言: 中文
- 翻译风格: 标准
- 预期输出: "你好，你今天怎么样？"

### 示例2：中日翻译（正式风格）
- 源文本: "重要な会議に参加する"
- 源语言: 日文
- 目标语言: 中文
- 翻译风格: 正式
- 预期输出: "参加重要会议"

### 示例3：自动检测语言翻译
- 源文本: "Bonjour, comment allez-vous?"
- 源语言: 自动检测
- 目标语言: 中文
- 翻译风格: 口语化
- 预期输出: "你好，你怎么样？"

## 注意事项

1. **API密钥安全**: 请妥善保管您的API密钥，不要分享给他人
2. **网络连接**: 确保ComfyUI所在环境能够访问API服务商
3. **文本长度**: 过长的文本可能需要分批翻译
4. **费用控制**: 注意API调用费用，建议先进行小量测试
5. **翻译质量**: 不同模型的翻译质量可能有差异，建议根据需求选择合适的模型

## 环境变量回退

当界面中的 `apiBaseUrl`、`apiKey`、`model` 留空时，插件会按以下顺序回退到环境变量：
- Base URL: `LLM_API_BASEURL` → `OPENAI_BASE_URL` → `OPENAI_API_BASE_URL` → `DEEPSEEK_API_BASE_URL`
- API Key: `LLM_API_KEY` → `OPENAI_API_KEY` → `DEEPSEEK_API_KEY`
- Model: `LLM_MODEL` → `OPENAI_MODEL` → `DEEPSEEK_MODEL`

## 故障排除

### 常见错误及解决方案

1. **"错误：请提供API密钥"**
   - 解决方案: 在API Key字段中输入有效的API密钥

2. **"错误：请输入要翻译的文本"**
   - 解决方案: 在源文本字段中输入要翻译的内容

3. **"翻译错误：API连接失败"**
  - 解决方案: 检查网络连接和 `apiBaseUrl` 是否正确

4. **"错误：API返回空结果"**
   - 解决方案: 检查模型名称是否正确，API密钥是否有效

5. **翻译质量不佳**
  - 解决方案: 尝试调整温度参数，或选择更适合的翻译风格

## 示例工作流

仓库内已提供 `翻译示例工作流.json`，使用 `RN 翻译器`（单一 Options 形态），并包含 `apiBaseUrl/apiKey/model` 三个配置项示例。可在 ComfyUI 中直接导入运行。

## 更新日志

### v1.1.0 (2025-11-25)
- 合并为单一 Options 形态节点，显示名称为“RN 翻译器”
- 重命名输入为 `apiBaseUrl/apiKey/model`，支持环境变量回退
- 更新示例工作流以匹配新版节点

## 开源协议

本项目采用MIT协议开源，详见LICENSE文件。

## 贡献

欢迎提交Issue和Pull Request来改进本插件。

## 联系方式

如有问题或建议，请通过GitHub Issue联系我们。
